When sending/recieving, the client can not recieve message. Put the sending/recieving in its own thread
